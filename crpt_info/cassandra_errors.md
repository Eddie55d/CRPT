# Cassandra 

[ссылка на Confluence для дежурных](https://confluence.crpt.ru/pages/viewpage.action?pageId=355225723)


## WARNING - CassandraClientRequestReadFailureDBA 


[ссылка на Confluence](https://confluence.crpt.ru/pages/viewpage.action?pageId=377974755)

```sh
grep -E "ERROR|WARN" /var/log/cassandra/system.log
```

```sh
nodetool compactionstats
```
Разбор логов
Сообщение о таймауте MUTATION_RSP:


WARN  [MutationStage-25] 2025-02-25 20:57:02,464+0300 NoSpamLogger.java:108 - cassini-intel-ssd12.lt01.rtng.crpt.tech/10.9.41.97:7000->/10.9.41.88:7000-SMALL_MESSAGES-67c192c1 dropping message of type MUTATION_RSP whose timeout expired before reaching the network
Описание: Это предупреждение указывает на то, что сообщение типа MUTATION_RSP (ответ на запись) было отброшено, потому что его таймаут истек до того, как оно достигло сети.
Причина: Это может быть связано с перегрузкой сети, высокой задержкой или проблемами с производительностью узла.
Сообщение о таймауте READ_REQ:


WARN  [Messaging-EventLoop-3-1] 2025-02-25 20:58:22,907+0300 NoSpamLogger.java:108 - cassini-intel-ssd12.lt01.rtng.crpt.tech/10.9.41.97:7000->/10.9.41.98:7000-SMALL_MESSAGES-db5fc9bc dropping message of type READ_REQ whose timeout expired before reaching the network
Описание: Это предупреждение указывает на то, что сообщение типа READ_REQ (запрос на чтение) было отброшено по той же причине, что и предыдущие сообщения.
Причина: Высокая нагрузка на сеть или узел может привести к истечению времени ожидания.
Сообщение о локальной паузе:


WARN  [GossipTasks:1] 2025-02-25 20:58:22,806+0300 FailureDetector.java:335 - Not marking nodes down due to local pause of 6824486120ns > 5000000000ns
Описание: Это предупреждение указывает на то, что система не пометила узлы как недоступные, несмотря на то, что была зафиксирована локальная пауза (время, в течение которого узел не отвечал) более 5 секунд.
Причина: Это может указывать на проблемы с производительностью или временные задержки в работе узла.
Сообщение о сборке мусора (GC):


WARN  [Service Thread] 2025-02-25 20:58:22,823+0300 GCInspector.java:292 - G1 Old Generation GC in 6371ms.  G1 Old Gen: 17091152288 -> 7281883432;
Описание: Это предупреждение указывает на то, что сборка мусора (GC) в старом поколении памяти заняла 6371 мс.
Причина: Длительная сборка мусора может указывать на проблемы с управлением памятью, что может привести к задержкам в обработке запросов.
Сообщение о таймауте операций:


WARN  [ScheduledTasks:1] 2025-02-25 20:59:37,183+0300 NoSpamLogger.java:108 - Some operations timed out, details available at debug level (debug.log)
Описание: Это предупреждение указывает на то, что некоторые операции завершились таймаутом.
Причина: Это может быть связано с перегрузкой узла или сети.
Возможные причины и решения
Перегрузка узлов:

Проверьте использование ресурсов (CPU, память, диск) на узлах, чтобы убедиться, что они не перегружены.
Увеличьте ресурсы, если это необходимо.
Проблемы с сетью:

Проверьте состояние сети между узлами. Высокая задержка или потеря пакетов могут привести к таймаутам.
Убедитесь, что настройки брандмауэра и маршрутизации корректны.
Настройки таймаутов:

Проверьте настройки таймаутов в конфигурации Cassandra (cassandra.yaml). Возможно, вам нужно увеличить значения




## CCRITICAL - CassandraWriteTimeoutDBA 
